---
# Persistent Volume Claims for Grace Project
#
# Simplified storage strategy:
# - Input data: Included in Docker image (CSV files are small)
# - Output results: Shared PVC for all experiment outputs
# - Model weights: Shared cache PVC (download once, use many times)
# - Reasoning traces: Skipped for now (can add later if needed)
#
# Using rook-cephfs (RWX) for multi-pod read/write access

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: thomas-grace-results
  namespace: lemn-lab
  labels:
    project: grace-experiments
    purpose: results
    owner: thomas
spec:
  accessModes:
    - ReadWriteMany  # Multiple jobs can write simultaneously
  resources:
    requests:
      storage: 50Gi  # All experiment outputs (6 models Ã— 4 experiments)
  storageClassName: rook-cephfs

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: thomas-grace-model-cache
  namespace: lemn-lab
  labels:
    project: grace-experiments
    purpose: model-cache
    owner: thomas
spec:
  accessModes:
    - ReadWriteMany  # All pods share the cache
  resources:
    requests:
      storage: 250Gi  # Room for 2-3 models cached at once
  storageClassName: rook-cephfs
